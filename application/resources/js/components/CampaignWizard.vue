<template>
    <div class="wizard-container">
        <div class="wizard-header">
            <h2>Ú©Ù…Ù¾ÛŒÙ† Ù†Ù…Ø§ÛŒØ´Ú¯Ø± ØªØ§Ú©Ø³ÛŒ Ø¯ÛŒØ¬ÛŒØªØ§Ù„</h2>
            <div class="step-indicator">
                <div 
                    v-for="(step, index) in steps" 
                    :key="index"
                    :class="['step-dot', { active: currentStep === index + 1, completed: currentStep > index + 1 }]"
                >
                    {{ index + 1 }}
                </div>
            </div>
            <p class="step-title">{{ steps[currentStep - 1] }}</p>
            
            <!-- Developer Notes Toggle -->
            <button 
                @click="showDeveloperNotes = !showDeveloperNotes" 
                class="dev-notes-toggle"
                type="button"
            >
                {{ showDeveloperNotes ? 'ğŸ”’ Ù…Ø®ÙÛŒ Ú©Ø±Ø¯Ù†' : 'ğŸ‘¨â€ğŸ’» Ù†Ù…Ø§ÛŒØ´' }} ÛŒØ§Ø¯Ø¯Ø§Ø´Øªâ€ŒÙ‡Ø§ÛŒ ØªÙˆØ³Ø¹Ù‡â€ŒØ¯Ù‡Ù†Ø¯Ù‡
            </button>
        </div>

        <!-- Developer Notes Panel -->
        <div v-if="showDeveloperNotes" class="developer-notes">
            <h3>ğŸ“‹ ÛŒØ§Ø¯Ø¯Ø§Ø´Øªâ€ŒÙ‡Ø§ÛŒ ØªÙˆØ³Ø¹Ù‡â€ŒØ¯Ù‡Ù†Ø¯Ù‡ - Ù‚ÙˆØ§Ù†ÛŒÙ† Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ</h3>
            <div class="notes-content">
                <div class="note-section">
                    <h4>Ù…Ø±Ø­Ù„Ù‡ 1: Ù†Ø§Ù… Ùˆ ÙˆÛŒØ¯ÛŒÙˆ</h4>
                    <ul>
                        <li><strong>Ù†Ø§Ù… Ú©Ù…Ù¾ÛŒÙ†:</strong> Ø§Ù„Ø²Ø§Ù…ÛŒØŒ Ø±Ø´ØªÙ‡ØŒ Ø­Ø¯Ø§Ú©Ø«Ø± 255 Ú©Ø§Ø±Ø§Ú©ØªØ±</li>
                        <li><strong>ÙØ§ÛŒÙ„ ÙˆÛŒØ¯ÛŒÙˆ:</strong> Ø§Ù„Ø²Ø§Ù…ÛŒØŒ Ù†ÙˆØ¹ ÙØ§ÛŒÙ„: mp4, avi, mov, wmvØŒ Ø­Ø¯Ø§Ú©Ø«Ø± 500MB (100MB Ø¯Ø± Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒØŒ Ø§Ù…Ø§ Ø³Ø±ÙˆØ± 500MB Ø±Ø§ Ù…Ø¬Ø§Ø² Ù…ÛŒâ€ŒÚ©Ù†Ø¯)</li>
                    </ul>
                </div>
                <div class="note-section">
                    <h4>Ù…Ø±Ø­Ù„Ù‡ 2: Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§</h4>
                    <ul>
                        <li><strong>Ø±ÙˆØ²Ù‡Ø§:</strong> Ø§Ù„Ø²Ø§Ù…ÛŒØŒ Ø¹Ø¯Ø¯ ØµØ­ÛŒØ­ØŒ Ø­Ø¯Ø§Ù‚Ù„ 1</li>
                        <li><strong>Ù…Ø§Ø´ÛŒÙ†â€ŒÙ‡Ø§:</strong> Ø§Ù„Ø²Ø§Ù…ÛŒØŒ Ø¹Ø¯Ø¯ ØµØ­ÛŒØ­ØŒ Ø­Ø¯Ø§Ù‚Ù„ 1</li>
                        <li><strong>Ù…ÙˆÙ‚Ø¹ÛŒØªâ€ŒÙ‡Ø§:</strong> Ø§Ù„Ø²Ø§Ù…ÛŒØŒ Ø¢Ø±Ø§ÛŒÙ‡ØŒ Ø­Ø¯Ø§Ù‚Ù„ 1 Ù…ÙˆÙ‚Ø¹ÛŒØª Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡ (Ø§Ø² 12 Ù…Ø³ÛŒØ± Ù…ÙˆØ¬ÙˆØ¯)</li>
                    </ul>
                </div>
                <div class="note-section">
                    <h4>Ù…Ø±Ø­Ù„Ù‡ 3: Ù„ÛŒÙ†Ú© Ùˆ UTM</h4>
                    <ul>
                        <li><strong>Ù„ÛŒÙ†Ú© ÙØ±ÙˆØ¯:</strong> Ø§Ù„Ø²Ø§Ù…ÛŒØŒ ÙØ±Ù…Øª URL Ù…Ø¹ØªØ¨Ø±</li>
                        <li><strong>Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ÛŒ UTM:</strong> Ø§Ø®ØªÛŒØ§Ø±ÛŒØŒ ØªÙ…Ø§Ù… ÙÛŒÙ„Ø¯Ù‡Ø§ Ø±Ø´ØªÙ‡â€ŒÙ‡Ø§ÛŒ Ø§Ø®ØªÛŒØ§Ø±ÛŒ Ù‡Ø³ØªÙ†Ø¯</li>
                        <li>ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ UTM: utm_source, utm_medium, utm_campaign, utm_term, utm_content</li>
                    </ul>
                </div>
                <div class="note-section">
                    <h4>Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ Ø¨Ú©â€ŒØ§Ù†Ø¯ (CampaignController@store)</h4>
                    <pre class="code-block">Ù‚ÙˆØ§Ù†ÛŒÙ† Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ:
- name: required|string|max:255
- video_file: required|file|mimes:mp4,avi,mov,wmv|max:102400
- days: required|integer|min:1
- cars: required|integer|min:1
- locations: required|string (JSON)
- link: required|url
- utms: nullable|string (JSON)

ÙˆØ¶Ø¹ÛŒØª Ù¾Ø³ Ø§Ø² Ø§ÛŒØ¬Ø§Ø¯: 'waiting_admin_approval'</pre>
                </div>
                <div class="note-section">
                    <h4>Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ ÙØ±Ø§Ù†Øªâ€ŒØ§Ù†Ø¯</h4>
                    <ul>
                        <li><strong>Ù…Ø±Ø­Ù„Ù‡ 1:</strong> Ù†Ø§Ù… Ø§Ù„Ø²Ø§Ù…ÛŒ (ØºÛŒØ± Ø®Ø§Ù„ÛŒ)ØŒ ÙØ§ÛŒÙ„ ÙˆÛŒØ¯ÛŒÙˆ Ø§Ù„Ø²Ø§Ù…ÛŒ</li>
                        <li><strong>Ù…Ø±Ø­Ù„Ù‡ 2:</strong> Ø±ÙˆØ²Ù‡Ø§ >= 1ØŒ Ù…Ø§Ø´ÛŒÙ†â€ŒÙ‡Ø§ >= 1ØŒ Ø­Ø¯Ø§Ù‚Ù„ 1 Ù…ÙˆÙ‚Ø¹ÛŒØª Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡</li>
                        <li><strong>Ù…Ø±Ø­Ù„Ù‡ 3:</strong> ÙØ±Ù…Øª URL Ù…Ø¹ØªØ¨Ø± Ø¨Ø±Ø§ÛŒ Ù„ÛŒÙ†Ú© ÙØ±ÙˆØ¯ØŒ UTM Ø§Ø®ØªÛŒØ§Ø±ÛŒ</li>
                        <li><strong>Ù…Ø±Ø­Ù„Ù‡ 4:</strong> ØªÙ…Ø§Ù… Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒâ€ŒÙ‡Ø§ÛŒ Ù‚Ø¨Ù„ÛŒ Ø¨Ø§ÛŒØ¯ Ù¾Ø§Ø³ Ø´ÙˆÙ†Ø¯</li>
                    </ul>
                </div>
                <div class="note-section">
                    <h4>Ù†Ù‚Ø·Ù‡ Ù¾Ø§ÛŒØ§Ù†ÛŒ API</h4>
                    <pre class="code-block">POST /campaigns
Content-Type: multipart/form-data

Ø¨Ø¯Ù†Ù‡ Ø¯Ø±Ø®ÙˆØ§Ø³Øª (FormData):
- name: string
- video_file: File
- days: integer
- cars: integer
- locations: JSON string (array)
- link: URL string
- utms: JSON string (object)

Ù¾Ø§Ø³Ø®:
{
  "success": true,
  "campaign_id": 1,
  "message": "Campaign created successfully"
}</pre>
                </div>
                <div class="note-section">
                    <h4>Ø¬Ø²Ø¦ÛŒØ§Øª Ø¢Ù¾Ù„ÙˆØ¯ ÙØ§ÛŒÙ„</h4>
                    <ul>
                        <li><strong>Ø­Ø¯Ø§Ú©Ø«Ø± Ø§Ù†Ø¯Ø§Ø²Ù‡:</strong> 500MB (Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ Ø³Ø±ÙˆØ±)ØŒ 100MB (Ù‚Ø§Ù†ÙˆÙ† Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ)</li>
                        <li><strong>ÙØ±Ù…Øªâ€ŒÙ‡Ø§ÛŒ Ù¾Ø°ÛŒØ±ÙØªÙ‡ Ø´Ø¯Ù‡:</strong> MP4, AVI, MOV, WMV</li>
                        <li><strong>Ø°Ø®ÛŒØ±Ù‡â€ŒØ³Ø§Ø²ÛŒ:</strong> public/campaigns/videos/ (Ø°Ø®ÛŒØ±Ù‡â€ŒØ³Ø§Ø²ÛŒ Laravel)</li>
                        <li><strong>ØªÙˆÙ„ÛŒØ¯:</strong> Ø¨Ø§ÛŒØ¯ Ø§Ø² Ø°Ø®ÛŒØ±Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø´ÛŒ MinIO Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†Ø¯</li>
                    </ul>
                </div>
                <div class="note-section">
                    <h4>ÙØ±Ù…Øª Ø¯Ø§Ø¯Ù‡</h4>
                    <pre class="code-block">Ù…ÙˆÙ‚Ø¹ÛŒØªâ€ŒÙ‡Ø§ (Ø±Ø´ØªÙ‡ JSON):
["route-1", "route-2", "route-3"]

UTM (Ø±Ø´ØªÙ‡ JSON):
{
  "utm_source": "google",
  "utm_medium": "cpc",
  "utm_campaign": "summer_sale",
  "utm_term": "taxi",
  "utm_content": "video"
}</pre>
                </div>
            </div>
        </div>

        <!-- Step 1: Name and Video -->
        <div v-if="currentStep === 1" class="wizard-step">
            <h3>Ù†Ø§Ù… Ú©Ù…Ù¾ÛŒÙ† Ùˆ ÙˆÛŒØ¯ÛŒÙˆ</h3>
            <div class="form-group">
                <label for="campaign-name">Ù†Ø§Ù… Ú©Ù…Ù¾ÛŒÙ† *</label>
                <input 
                    id="campaign-name"
                    type="text" 
                    v-model="formData.name" 
                    placeholder="Ù†Ø§Ù… Ú©Ù…Ù¾ÛŒÙ† Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯"
                    required
                />
            </div>
            <div class="form-group">
                <label for="video-file">ÙØ§ÛŒÙ„ ÙˆÛŒØ¯ÛŒÙˆ *</label>
                <input 
                    id="video-file"
                    type="file" 
                    @change="handleVideoUpload"
                    accept="video/*"
                    required
                />
                <p v-if="formData.videoFile" class="file-info">
                    Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡: {{ formData.videoFile.name }} ({{ formatFileSize(formData.videoFile.size) }})
                </p>
            </div>
        </div>

        <!-- Step 2: Days, Cars, Locations -->
        <div v-if="currentStep === 2" class="wizard-step">
            <h3>Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ÛŒ Ú©Ù…Ù¾ÛŒÙ†</h3>
            <div class="form-group">
                <label for="days">Ú†Ù†Ø¯ Ø±ÙˆØ² *</label>
                <input 
                    id="days"
                    type="number" 
                    v-model.number="formData.days" 
                    placeholder="ØªØ¹Ø¯Ø§Ø¯ Ø±ÙˆØ²Ù‡Ø§ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯"
                    min="1"
                    required
                />
            </div>
            <div class="form-group">
                <label for="cars">Ú†Ù†Ø¯ Ù…Ø§Ø´ÛŒÙ† *</label>
                <input 
                    id="cars"
                    type="number" 
                    v-model.number="formData.cars" 
                    placeholder="ØªØ¹Ø¯Ø§Ø¯ Ù…Ø§Ø´ÛŒÙ†â€ŒÙ‡Ø§ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯"
                    min="1"
                    required
                />
            </div>
            <div class="form-group">
                <label for="locations">Ù…ÙˆÙ‚Ø¹ÛŒØªâ€ŒÙ‡Ø§ * (Ú†Ù†Ø¯ØªØ§ÛŒÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯)</label>
                <select 
                    id="locations"
                    v-model="formData.locations" 
                    multiple
                    size="6"
                    required
                >
                    <option value="route-1">Ù…Ø³ÛŒØ± 1 - Ù…Ø±Ú©Ø² Ø´Ù‡Ø±</option>
                    <option value="route-2">Ù…Ø³ÛŒØ± 2 - Ù…Ù†Ø·Ù‚Ù‡ Ù…Ø§Ù„ÛŒ</option>
                    <option value="route-3">Ù…Ø³ÛŒØ± 3 - Ù…Ù†Ø·Ù‚Ù‡ Ø®Ø±ÛŒØ¯</option>
                    <option value="route-4">Ù…Ø³ÛŒØ± 4 - Ú©Ø±ÛŒØ¯ÙˆØ± ÙØ±ÙˆØ¯Ú¯Ø§Ù‡</option>
                    <option value="route-5">Ù…Ø³ÛŒØ± 5 - Ù…Ù†Ø·Ù‚Ù‡ Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡</option>
                    <option value="route-6">Ù…Ø³ÛŒØ± 6 - Ù…Ù†Ø·Ù‚Ù‡ ØªÙØ±ÛŒØ­ÛŒ</option>
                    <option value="route-7">Ù…Ø³ÛŒØ± 7 - Ù¾Ø§Ø±Ú© ØªØ¬Ø§Ø±ÛŒ</option>
                    <option value="route-8">Ù…Ø³ÛŒØ± 8 - Ù…Ø³Ú©ÙˆÙ†ÛŒ Ø´Ù…Ø§Ù„</option>
                    <option value="route-9">Ù…Ø³ÛŒØ± 9 - Ù…Ø³Ú©ÙˆÙ†ÛŒ Ø¬Ù†ÙˆØ¨</option>
                    <option value="route-10">Ù…Ø³ÛŒØ± 10 - Ù…Ù†Ø·Ù‚Ù‡ ØµÙ†Ø¹ØªÛŒ</option>
                    <option value="route-11">Ù…Ø³ÛŒØ± 11 - Ø³Ø§Ø­Ù„ÛŒ</option>
                    <option value="route-12">Ù…Ø³ÛŒØ± 12 - Ù…Ø±Ú©Ø² Ø­ÙˆÙ…Ù‡</option>
                </select>
                <p class="help-text">Ø¨Ø±Ø§ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ú†Ù†Ø¯ Ù…ÙˆÙ‚Ø¹ÛŒØªØŒ Ctrl (ÙˆÛŒÙ†Ø¯ÙˆØ²) ÛŒØ§ Cmd (Ù…Ú©) Ø±Ø§ Ù†Ú¯Ù‡ Ø¯Ø§Ø±ÛŒØ¯</p>
                <p v-if="formData.locations.length > 0" class="selected-info">
                    Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡: {{ formData.locations.length }} Ù…ÙˆÙ‚Ø¹ÛŒØª
                </p>
            </div>
        </div>

        <!-- Step 3: Link and UTMs -->
        <div v-if="currentStep === 3" class="wizard-step">
            <h3>Ù„ÛŒÙ†Ú© Ùˆ Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ÛŒ UTM</h3>
            <div class="form-group">
                <label for="link">Ù„ÛŒÙ†Ú© ØµÙØ­Ù‡ ÙØ±ÙˆØ¯ *</label>
                <input 
                    id="link"
                    type="url" 
                    v-model="formData.link" 
                    placeholder="https://example.com/landing"
                    required
                />
            </div>
            <div class="form-group">
                <label>Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ÛŒ UTM</label>
                <div class="utm-group">
                    <input 
                        type="text" 
                        v-model="formData.utms.utm_source" 
                        placeholder="utm_source (Ù…Ø«Ø§Ù„: taxi_rooftop)"
                    />
                    <input 
                        type="text" 
                        v-model="formData.utms.utm_medium" 
                        placeholder="utm_medium (Ù…Ø«Ø§Ù„: display)"
                    />
                    <input 
                        type="text" 
                        v-model="formData.utms.utm_campaign" 
                        placeholder="utm_campaign (Ù…Ø«Ø§Ù„: summer_promo)"
                    />
                    <input 
                        type="text" 
                        v-model="formData.utms.utm_term" 
                        placeholder="utm_term (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)"
                    />
                    <input 
                        type="text" 
                        v-model="formData.utms.utm_content" 
                        placeholder="utm_content (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)"
                    />
                </div>
            </div>
        </div>

        <!-- Step 4: Overview -->
        <div v-if="currentStep === 4" class="wizard-step">
            <h3>Ù†Ù…Ø§ÛŒ Ú©Ù„ÛŒ Ú©Ù…Ù¾ÛŒÙ†</h3>
            <div class="overview-section">
                <h4>Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ù…Ù¾ÛŒÙ†</h4>
                <p><strong>Ù†Ø§Ù…:</strong> {{ formData.name || 'Ø§Ø±Ø§Ø¦Ù‡ Ù†Ø´Ø¯Ù‡' }}</p>
                <p><strong>ÙˆÛŒØ¯ÛŒÙˆ:</strong> {{ formData.videoFile ? formData.videoFile.name : 'Ø¢Ù¾Ù„ÙˆØ¯ Ù†Ø´Ø¯Ù‡' }}</p>
            </div>

            <div class="overview-section">
                <h4>Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ÛŒ Ú©Ù…Ù¾ÛŒÙ†</h4>
                <p><strong>Ø±ÙˆØ²Ù‡Ø§:</strong> {{ formData.days || 'Ù…Ø´Ø®Øµ Ù†Ø´Ø¯Ù‡' }}</p>
                <p><strong>Ù…Ø§Ø´ÛŒÙ†â€ŒÙ‡Ø§:</strong> {{ formData.cars || 'Ù…Ø´Ø®Øµ Ù†Ø´Ø¯Ù‡' }}</p>
                <p><strong>Ù…ÙˆÙ‚Ø¹ÛŒØªâ€ŒÙ‡Ø§:</strong> 
                    <span v-if="formData.locations && formData.locations.length > 0">
                        {{ formData.locations.join('ØŒ ') }}
                    </span>
                    <span v-else>Ù…Ø´Ø®Øµ Ù†Ø´Ø¯Ù‡</span>
                </p>
            </div>

            <div class="overview-section">
                <h4>Ù„ÛŒÙ†Ú© Ùˆ Ø±Ø¯ÛŒØ§Ø¨ÛŒ</h4>
                <p><strong>Ù„ÛŒÙ†Ú© ÙØ±ÙˆØ¯:</strong> 
                    <a :href="formData.link" target="_blank" v-if="formData.link">
                        {{ formData.link }}
                    </a>
                    <span v-else>Ø§Ø±Ø§Ø¦Ù‡ Ù†Ø´Ø¯Ù‡</span>
                </p>
                <p v-if="hasUtms()"><strong>Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ÛŒ UTM:</strong></p>
                <ul v-if="hasUtms()" class="utm-list">
                    <li v-for="(value, key) in formData.utms" :key="key" v-if="value">
                        <strong>{{ key }}:</strong> {{ value }}
                    </li>
                </ul>
            </div>

            <div class="form-group">
                <button type="button" @click="submitCampaign" class="btn-submit" :disabled="submitting">
                    {{ submitting ? 'Ø¯Ø± Ø­Ø§Ù„ Ø§ÛŒØ¬Ø§Ø¯ Ú©Ù…Ù¾ÛŒÙ†...' : 'Ø§ÛŒØ¬Ø§Ø¯ Ú©Ù…Ù¾ÛŒÙ†' }}
                </button>
            </div>
        </div>

        <!-- Navigation Buttons -->
        <div class="wizard-navigation">
            <button 
                v-if="currentStep < 4" 
                @click="nextStep" 
                class="btn btn-primary"
                :disabled="!canProceed"
            >
                Ø¨Ø¹Ø¯ÛŒ
            </button>
            <button 
                v-if="currentStep > 1" 
                @click="prevStep" 
                class="btn btn-secondary"
            >
                Ù‚Ø¨Ù„ÛŒ
            </button>
        </div>
    </div>
</template>

<script>
import axios from 'axios';

export default {
    name: 'CampaignWizard',
    data() {
        return {
            currentStep: 1,
            steps: ['Ù†Ø§Ù… Ùˆ ÙˆÛŒØ¯ÛŒÙˆ', 'Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§', 'Ù„ÛŒÙ†Ú© Ùˆ UTM', 'Ù†Ù…Ø§ÛŒ Ú©Ù„ÛŒ'],
            submitting: false,
            showDeveloperNotes: false,
            formData: {
                name: '',
                videoFile: null,
                days: null,
                cars: null,
                locations: [],
                link: '',
                utms: {
                    utm_source: '',
                    utm_medium: '',
                    utm_campaign: '',
                    utm_term: '',
                    utm_content: ''
                }
            }
        }
    },
    computed: {
        canProceed() {
            switch(this.currentStep) {
                case 1:
                    return this.formData.name.trim() !== '' && this.formData.videoFile !== null;
                case 2:
                    return this.formData.days > 0 && 
                           this.formData.cars > 0 && 
                           this.formData.locations.length > 0;
                case 3:
                    return this.formData.link.trim() !== '';
                default:
                    return true;
            }
        }
    },
    methods: {
        handleVideoUpload(event) {
            const file = event.target.files[0];
            if (file) {
                this.formData.videoFile = file;
            }
        },
        formatFileSize(bytes) {
            if (bytes === 0) return '0 Ø¨Ø§ÛŒØª';
            const k = 1024;
            const sizes = ['Ø¨Ø§ÛŒØª', 'Ú©ÛŒÙ„ÙˆØ¨Ø§ÛŒØª', 'Ù…Ú¯Ø§Ø¨Ø§ÛŒØª', 'Ú¯ÛŒÚ¯Ø§Ø¨Ø§ÛŒØª'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return Math.round(bytes / Math.pow(k, i) * 100) / 100 + ' ' + sizes[i];
        },
        hasUtms() {
            return Object.values(this.formData.utms).some(val => val && val.trim() !== '');
        },
        nextStep() {
            if (this.canProceed && this.currentStep < 4) {
                this.currentStep++;
            }
        },
        prevStep() {
            if (this.currentStep > 1) {
                this.currentStep--;
            }
        },
        async submitCampaign() {
            if (this.submitting) return;

            // Validate required fields
            if (!this.formData.name || !this.formData.videoFile || 
                !this.formData.days || !this.formData.cars || 
                this.formData.locations.length === 0 || !this.formData.link) {
                alert('Ù„Ø·ÙØ§Ù‹ ØªÙ…Ø§Ù… ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø§Ù„Ø²Ø§Ù…ÛŒ Ø±Ø§ Ù‚Ø¨Ù„ Ø§Ø² Ø§Ø±Ø³Ø§Ù„ Ù¾Ø± Ú©Ù†ÛŒØ¯.');
                return;
            }

            this.submitting = true;

            try {
                // Create FormData for file upload
                const formData = new FormData();
                formData.append('name', this.formData.name);
                formData.append('video_file', this.formData.videoFile);
                formData.append('days', this.formData.days);
                formData.append('cars', this.formData.cars);
                formData.append('locations', JSON.stringify(this.formData.locations));
                formData.append('link', this.formData.link);
                formData.append('utms', JSON.stringify(this.formData.utms));

                const response = await axios.post('/campaigns', formData, {
                    headers: {
                        'Content-Type': 'multipart/form-data'
                    }
                });

                if (response.data.success) {
                    alert('Ú©Ù…Ù¾ÛŒÙ† Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯! Ø¯Ø± Ø­Ø§Ù„ Ù‡Ø¯Ø§ÛŒØª Ø¨Ù‡ ØµÙØ­Ù‡ Ú©Ù…Ù¾ÛŒÙ†...');
                    window.location.href = `/campaigns/${response.data.campaign_id}`;
                } else {
                    alert('Ø®Ø·Ø§ Ø¯Ø± Ø§ÛŒØ¬Ø§Ø¯ Ú©Ù…Ù¾ÛŒÙ†: ' + (response.data.message || 'Ø®Ø·Ø§ÛŒ Ù†Ø§Ø´Ù†Ø§Ø®ØªÙ‡'));
                }
            } catch (error) {
                console.error('Error submitting campaign:', error);
                alert('Ø®Ø·Ø§ Ø¯Ø± Ø§ÛŒØ¬Ø§Ø¯ Ú©Ù…Ù¾ÛŒÙ†. Ù„Ø·ÙØ§Ù‹ Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯.');
            } finally {
                this.submitting = false;
            }
        }
    }
}
</script>

<style scoped>
.wizard-container {
    max-width: 900px;
    margin: 2rem auto;
    padding: 2rem;
    background: #fff;
    border-radius: 12px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}

.wizard-header {
    margin-bottom: 2rem;
    text-align: center;
}

.wizard-header h2 {
    color: #0066cc;
    margin-bottom: 1rem;
}

.step-indicator {
    display: flex;
    justify-content: center;
    gap: 1rem;
    margin: 1.5rem 0;
}

.step-dot {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: #e0e0e0;
    color: #666;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    transition: all 0.3s;
}

.step-dot.active {
    background: #0066cc;
    color: white;
    transform: scale(1.1);
}

.step-dot.completed {
    background: #4caf50;
    color: white;
}

.step-title {
    font-size: 1.2rem;
    color: #333;
    font-weight: 500;
}

.wizard-step {
    min-height: 400px;
    padding: 1rem 0;
}

.wizard-step h3 {
    color: #333;
    margin-bottom: 1.5rem;
    border-bottom: 2px solid #0066cc;
    padding-bottom: 0.5rem;
}

.form-group {
    margin-bottom: 1.5rem;
}

.form-group label {
    display: block;
    margin-bottom: 0.5rem;
    color: #333;
    font-weight: 500;
}

.form-group input[type="text"],
.form-group input[type="url"],
.form-group input[type="number"],
.form-group input[type="file"],
.form-group select,
.form-group textarea {
    width: 100%;
    padding: 0.75rem;
    border: 2px solid #ddd;
    border-radius: 6px;
    font-size: 1rem;
    transition: border-color 0.3s;
    box-sizing: border-box;
}

.form-group select[multiple] {
    min-height: 150px;
}

.form-group input:focus,
.form-group select:focus,
.form-group textarea:focus {
    outline: none;
    border-color: #0066cc;
}

.file-info, .help-text, .selected-info {
    margin-top: 0.5rem;
    font-size: 0.9rem;
    color: #666;
}

.utm-group {
    display: grid;
    grid-template-columns: 1fr;
    gap: 0.75rem;
}

.overview-section {
    background: #f5f5f5;
    padding: 1.5rem;
    border-radius: 8px;
    margin-bottom: 1.5rem;
}

.overview-section h4 {
    color: #0066cc;
    margin-bottom: 1rem;
    border-bottom: 1px solid #ddd;
    padding-bottom: 0.5rem;
}

.overview-section p {
    margin: 0.5rem 0;
    color: #333;
    line-height: 1.6;
}

.overview-section strong {
    color: #555;
    min-width: 150px;
    display: inline-block;
}

.utm-list {
    list-style: none;
    padding: 0;
    margin: 0.5rem 0;
}

.utm-list li {
    padding: 0.25rem 0;
    color: #333;
}

.wizard-navigation {
    display: flex;
    justify-content: space-between;
    margin-top: 2rem;
    padding-top: 1.5rem;
    border-top: 2px solid #eee;
}

.btn {
    padding: 0.75rem 2rem;
    border: none;
    border-radius: 6px;
    font-size: 1rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s;
}

.btn-primary {
    background: #0066cc;
    color: white;
}

.btn-primary:hover:not(:disabled) {
    background: #0052a3;
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0, 102, 204, 0.3);
}

.btn-primary:disabled {
    background: #ccc;
    cursor: not-allowed;
}

.btn-secondary {
    background: #6c757d;
    color: white;
}

.btn-secondary:hover {
    background: #5a6268;
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(108, 117, 125, 0.3);
}

.btn-submit {
    width: 100%;
    padding: 1rem;
    background: #4caf50;
    color: white;
    border: none;
    border-radius: 6px;
    font-size: 1.1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
    margin-top: 1rem;
}

.btn-submit:hover:not(:disabled) {
    background: #45a049;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(76, 175, 80, 0.4);
}

.btn-submit:disabled {
    background: #ccc;
    cursor: not-allowed;
}

.overview-section a {
    color: #0066cc;
    text-decoration: none;
}

.overview-section a:hover {
    text-decoration: underline;
}

.dev-notes-toggle {
    margin-top: 1rem;
    padding: 0.5rem 1rem;
    background: #6c757d;
    color: white;
    border: none;
    border-radius: 6px;
    font-size: 0.875rem;
    cursor: pointer;
    transition: all 0.3s;
}

.dev-notes-toggle:hover {
    background: #5a6268;
    transform: translateY(-2px);
}

.developer-notes {
    background: #f8f9fa;
    border: 2px solid #007bff;
    border-radius: 8px;
    padding: 1.5rem;
    margin-bottom: 2rem;
    max-height: 600px;
    overflow-y: auto;
}

.developer-notes h3 {
    color: #007bff;
    margin-bottom: 1rem;
    border-bottom: 2px solid #007bff;
    padding-bottom: 0.5rem;
}

.notes-content {
    display: grid;
    gap: 1.5rem;
}

.note-section {
    background: white;
    padding: 1rem;
    border-radius: 6px;
    border-left: 4px solid #007bff;
}

.note-section h4 {
    color: #333;
    margin-bottom: 0.75rem;
    font-size: 1rem;
}

.note-section ul {
    margin: 0;
    padding-left: 1.5rem;
    color: #555;
}

.note-section li {
    margin: 0.5rem 0;
    line-height: 1.6;
}

.note-section strong {
    color: #007bff;
}

.code-block {
    background: #2d2d2d;
    color: #f8f8f2;
    padding: 1rem;
    border-radius: 4px;
    overflow-x: auto;
    font-family: 'Courier New', monospace;
    font-size: 0.875rem;
    line-height: 1.6;
    margin: 0.5rem 0;
}
</style>

